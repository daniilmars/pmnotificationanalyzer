<mvc:View
    controllerName="com.sap.pm.pmanalyzerfiori.controller.Worklist"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:l="sap.ui.layout">

    <Page id="worklistPage" showHeader="false" busy="{ui>/isBusy}">
        <subHeader>
            <OverflowToolbar>
                <Title text="{i18n>worklistTitle}" level="H4"/>
                <ToolbarSpacer />
                <Button
                    icon="sap-icon://manager-insight"
                    text="{i18n>qualityDashboardBtn}"
                    press=".onNavigateToQualityDashboard"
                    type="Ghost"/>
                <Button
                    icon="sap-icon://performance"
                    text="{i18n>reliabilityDashboardBtn}"
                    press=".onNavigateToReliabilityDashboard"
                    type="Ghost"/>
                <Button
                    icon="sap-icon://history"
                    text="{i18n>auditDashboardBtn}"
                    press=".onNavigateToAuditDashboard"
                    type="Ghost"/>
                <ToolbarSeparator/>
                <Select
                    id="languageSelect"
                    change=".onLanguageChange">
                    <core:Item key="en" text="English" />
                    <core:Item key="de" text="Deutsch" />
                </Select>
            </OverflowToolbar>
        </subHeader>
        <content>
            <fb:FilterBar id="filterBar" search=".onFilterSearch" showRestoreButton="true" showClearButton="true">
                <fb:filterGroupItems>
                    <fb:FilterGroupItem groupName="main" name="shortText" label="{i18n>shortTextLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <SearchField id="shortTextFilter" placeholder="{i18n>shortTextPlaceholder}" width="100%"/>
                        </fb:control>
                    </fb:FilterGroupItem>
                    <fb:FilterGroupItem groupName="main" name="notifType" label="{i18n>notificationTypeLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <ComboBox id="notifTypeFilter" items="{filters>/uniqueTypes}" placeholder="{i18n>notificationTypePlaceholder}">
                                <core:Item key="{filters>key}" text="{filters>text}"/>
                            </ComboBox>
                        </fb:control>
                    </fb:FilterGroupItem>
                     <fb:FilterGroupItem groupName="main" name="creator" label="{i18n>createdByLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <ComboBox id="creatorFilter" items="{filters>/uniqueCreators}" placeholder="{i18n>createdByPlaceholder}">
                                <core:Item key="{filters>key}" text="{filters>text}"/>
                            </ComboBox>
                        </fb:control>
                    </fb:FilterGroupItem>
                    <fb:FilterGroupItem groupName="main" name="funcLoc" label="{i18n>functionalLocationLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <ComboBox id="funcLocFilter" items="{filters>/uniqueFuncLocs}" placeholder="{i18n>functionalLocationPlaceholder}">
                                <core:Item key="{filters>key}" text="{filters>text}"/>
                            </ComboBox>
                        </fb:control>
                    </fb:FilterGroupItem>
                    <fb:FilterGroupItem groupName="main" name="equipment" label="{i18n>equipmentLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <ComboBox id="equipmentFilter" items="{filters>/uniqueEquipments}" placeholder="{i18n>equipmentPlaceholder}">
                                <core:Item key="{filters>key}" text="{filters>text}"/>
                            </ComboBox>
                        </fb:control>
                    </fb:FilterGroupItem>
                    <fb:FilterGroupItem groupName="main" name="status" label="{i18n>statusLabel}" visibleInFilterBar="true">
                        <fb:control>
                            <ComboBox id="statusFilter" items="{filters>/uniqueStatuses}" placeholder="{i18n>statusPlaceholder}">
                                <core:Item key="{filters>key}" text="{filters>text}"/>
                            </ComboBox>
                        </fb:control>
                    </fb:FilterGroupItem>
                </fb:filterGroupItems>
            </fb:FilterBar>

            <List
                id="list"
                items="{/Notifications}"
                visible="true"
                updateFinished=".onListUpdateFinished">
                <noData>
                    <IllustratedMessage
                        illustrationType="sapIllus-NoData"
                        title="{i18n>noDataText}"
                        description="{i18n>noDataDescription}"/>
                </noData>
                <headerToolbar>
                    <OverflowToolbar>
                        <Title id="listTitle" text="{i18n>worklistTitle}" level="H5"/>
                        <ToolbarSpacer/>
                    </OverflowToolbar>
                </headerToolbar>
                <ObjectListItem
                    type="Navigation"
                    press=".onPress"
                    title="{NotificationId}: {Description}"
                    number="{PriorityText}"
                    numberState="{= ${Priority} === '1' ? 'Error' : ${Priority} === '2' ? 'Warning' : 'None' }"
                    highlight="{= ${Priority} === '1' ? 'Error' : (${Priority} === '2' ? 'Warning' : 'None') }">
                    <firstStatus>
                        <ObjectStatus title="{i18n>statusLabel}" text="{SystemStatusText}" />
                    </firstStatus>
                    <attributes>
                        <ObjectAttribute title="{i18n>functionalLocationLabel}" text="{FunctionalLocation}" />
                        <ObjectAttribute title="{i18n>equipmentLabel}" text="{EquipmentNumber}" />
                        <ObjectAttribute title="{i18n>notificationTypeLabel}" text="{NotificationTypeText}" />
                        <ObjectAttribute text="{path: 'CreationDate', formatter: '.formatter.formatDateTime'}" />
                    </attributes>
                </ObjectListItem>
            </List>
        </content>
    </Page>
</mvc:View>
