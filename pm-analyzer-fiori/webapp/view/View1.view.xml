<mvc:View
    controllerName="com.sap.pm.pmanalyzerfiori.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    displayBlock="true">
    <Page id="page" title="{i18n>title}" busy="{ui>/isBusy}">
        <headerContent>
            <!-- Removed Login/Logout buttons and user info as authentication is removed -->
        </headerContent>
        <content>
            <!-- Content is always visible as no authentication check is needed -->
            <VBox class="sapUiSmallMargin">
                <Label text="{i18n>view1.inputLabel}" labelFor="pmTextInput" />
                <TextArea
                    id="pmTextInput"
                    width="100%"
                    rows="8"
                    placeholder="{i18n>view1.inputPlaceholder}" />
                <Button
                    id="analyzeButton"
                    text="{i18n>view1.analyzeButton}"
                    press="onAnalyzePress"
                    type="Emphasized"
                    class="sapUiSmallMarginTop" />

                <Panel
                    id="resultsPanel"
                    headerText="{i18n>view1.resultsPanelHeader}"
                    class="sapUiSmallMarginTop"
                    visible="{analysis>/resultsVisible}"
                    busy="{analysis>/busy}">
                    <l:Grid defaultSpan="L6 M6 S12">
                        <Label text="{i18n>view1.scoreLabel}" labelFor="scoreIndicator" />
                        <ProgressIndicator
                            id="scoreIndicator"
                            percentValue="{analysis>/score}"
                            displayValue="{analysis>/score}/100"
                            showValue="true"
                            state="None"/>
                        <Label text="{i18n>view1.problemsLabel}"/>
                        <List items="{analysis>/problems}" noDataText="{i18n>noProblemsFound}">
                            <StandardListItem title="{analysis>}" type="Inactive"/>
                        </List>
                        <Label text="{i18n>view1.summaryLabel}" />
                        <Text text="{analysis>/summary}" />
                    </l:Grid>
                </Panel>
                <Panel id="chatPanel" headerText="Chat with Assistant" class="sapUiSmallMarginTop" visible="{analysis>/resultsVisible}">
                    <List
                        id="chatList"
                        items="{chat>/history}"
                        showSeparators="None">
                        <FeedListItem
                            authorIcon="{chat>authorIcon}"
                            text="{chat>text}" />
                    </List>
                    <FeedInput
                        id="chatInput"
                        post="onPostChatMessage" />
                </Panel>
            </VBox>
        </content>
    </Page>
</mvc:View>
