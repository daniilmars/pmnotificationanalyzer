<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">

    <Dialog
        id="loginDialog"
        title="{i18n>loginTitle}"
        type="Message"
        contentWidth="400px"
        escapeHandler=".onLoginDialogEscape">

        <content>
            <VBox class="sapUiSmallMargin">
                <!-- Application Logo/Title -->
                <HBox justifyContent="Center" class="sapUiMediumMarginBottom">
                    <VBox alignItems="Center">
                        <core:Icon
                            src="sap-icon://key"
                            size="3rem"
                            color="#0854A0"
                            class="sapUiSmallMarginBottom"/>
                        <Title text="{i18n>appTitle}" level="H3"/>
                        <Text text="{i18n>loginSubtitle}" class="sapUiTinyMarginTop"/>
                    </VBox>
                </HBox>

                <!-- Login Form -->
                <f:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4"
                    labelSpanL="4"
                    labelSpanM="4"
                    labelSpanS="12"
                    emptySpanXL="0"
                    emptySpanL="0"
                    emptySpanM="0"
                    emptySpanS="0"
                    columnsXL="1"
                    columnsL="1"
                    columnsM="1">

                    <Label text="{i18n>username}" required="true"/>
                    <Input
                        id="loginUsername"
                        value="{loginModel>/username}"
                        placeholder="{i18n>usernamePlaceholder}"
                        submit=".onLoginSubmit"
                        valueLiveUpdate="true"
                        liveChange=".onLoginInputChange"/>

                    <Label text="{i18n>password}" required="true"/>
                    <Input
                        id="loginPassword"
                        value="{loginModel>/password}"
                        type="Password"
                        placeholder="{i18n>passwordPlaceholder}"
                        submit=".onLoginSubmit"
                        valueLiveUpdate="true"
                        liveChange=".onLoginInputChange"/>

                </f:SimpleForm>

                <!-- Error Message Area -->
                <MessageStrip
                    id="loginErrorStrip"
                    visible="{loginModel>/hasError}"
                    text="{loginModel>/errorMessage}"
                    type="Error"
                    showIcon="true"
                    class="sapUiSmallMarginTop"/>

                <!-- Password Expiry Warning -->
                <MessageStrip
                    id="passwordExpiryWarning"
                    visible="{loginModel>/showPasswordWarning}"
                    text="{i18n>passwordExpiryWarning}"
                    type="Warning"
                    showIcon="true"
                    class="sapUiSmallMarginTop"/>

            </VBox>
        </content>

        <beginButton>
            <Button
                id="loginSubmitBtn"
                text="{i18n>login}"
                type="Emphasized"
                press=".onLoginSubmit"
                enabled="{= ${loginModel>/username} !== '' &amp;&amp; ${loginModel>/password} !== '' &amp;&amp; !${auth>/isLoading}}"/>
        </beginButton>

        <endButton>
            <Button
                text="{i18n>cancel}"
                press=".onLoginDialogCancel"
                visible="{loginModel>/showCancelButton}"/>
        </endButton>

        <customHeader>
            <Bar>
                <contentMiddle>
                    <Title text="{i18n>loginTitle}"/>
                </contentMiddle>
                <contentRight>
                    <BusyIndicator
                        visible="{auth>/isLoading}"
                        size="Small"/>
                </contentRight>
            </Bar>
        </customHeader>

    </Dialog>

</core:FragmentDefinition>
